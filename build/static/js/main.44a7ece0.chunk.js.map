{"version":3,"sources":["canvas.js","helpers.js","colorSlider.js","colorPanel.js","plusMinus.js","attrSelect.js","basicPanel.js","advancedPanel.js","topPanel.js","objects.js","buttonPanel.js","topBar.js","download.js","bind.js","intro.js","App.js","serviceWorker.js","index.js"],"names":["Canvas","props","side","priorClick","coords","v","h","idx","dir","ccStyle","getComputedStyle","document","getElementById","ccWidth","parseInt","width","slice","ccHeight","height","this","setSide","updateCanvas","ctx","refs","canvas","getContext","panels","i","length","draw","e","target","borderWidth","getPropertyValue","pageX","offsetLeft","pageY","offsetTop","line","iterTicks","axis","tick","thickness","preventDefault","console","log","type","canvasCoords","changedTouches","bind","grid","handleClick","index","currentPanel","offset","y","x","id","ref","onTouchStart","canvasStart","onTouchMove","canvasMove","onTouchEnd","canvasEnd","onMouseDown","onMouseMove","onMouseUp","React","Component","makeHeader","s","header","charAt","toUpperCase","ColorSlider","className","row","aspect","min","max","step","value","color","data-aspect","style","onChange","handleColorChange","ColorPanel","bottomClass","colorSource","styler","sliderStyle","hue","key","getStyle","sat","light","opacity","topRow","bottomRow","push","l","a","makeString","qual","right","lin","left","alert","inc","background","PlusMinus","input","createRef","current","getAttribute","oldVar","preventNegative","handleLineChange","allowed_chars","endValue","char","indexOf","isNaN","onClick","buttonChange","data-change","inputChange","readValue","AttrSelect","size","options","map","BasicPanel","regularity","returnColor","orientation","AdvancedPanel","spacing","lineWidth","boundary","u","d","r","TopPanel","handleAddLine","switchLine","addHandler","handlers","colorChanger","lineChanger","diff","switchHandler","displayPanel","panel","boundTo","bindees","sort","b","attributes","displayAdvanced","colorObj","base","undefined","fillStyle","Path2D","rect","fill","pattern","allowDraw","checkNaNs","createGrid","xAxis","yAxis","xStart","yStart","xEnd","yEnd","xGap","yGap","inheritOffset","xOffsetChange","yOffsetChange","xTick","yTick","drawSolid","lineStart","fillRect","drawRightSlash","iter","startX","startY","endX","endY","strokeStyle","beginPath","moveTo","lineTo","stroke","closePath","drawLeftSlash","drawHorizontalStripes","setBack","Math","floor","drawVerticalStripes","drawChecker","topLeft","breadth","depth","j","drawPatterns","solid","rightSlash","leftSlash","horizontalStripes","verticalStripes","checker","save","drawLines","restore","ButtonPanel","switchPanel","toggleText","displayAdvance","TopBar","nav","class","flip","href","Download","togglePreview","downloadImage","changeFormat","changeFilename","state","preview","format","filename","checked","setState","urlInput","image","toDataURL","link","createElement","body","appendChild","download","click","removeChild","newString","lastChar","radioButtons","substring","name","bkgd","backgroundImage","Bind","otherLines","count","includes","contents","lineButtons","unbind","radios","getElementsByName","found","Intro","root","App","downloadToggle","bindToggle","introToggle","handleBind","handleUnbind","navToggle","handleRemoveLine","handleCopyLine","advancedToggle","rootStyle","intro","topHandlers","buttonHandlers","backgroundColor","borderChanges","querySelectorAll","lineColor","borderColor","canvasStyle","canvasWidth","canvasHeight","updateStyles","lines","bindor","bindee","newPanels","splice","newCurrent","attr","currentLine","copyLine","Array","isArray","bindeeIndex","overlay","display","Boolean","window","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.44a7ece0.chunk.js","sourcesContent":["import React from 'react';\nimport './canvas.css';\n\nexport class Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.side = null;\n    this.priorClick = {\n      coords: {\n        v: 0,\n        h: 0\n      },\n      idx: null,\n      dir: null\n    }\n  }\n\n  componentDidMount() {\n    const ccStyle = getComputedStyle(\n      document.getElementById('canvas-container'));\n    const ccWidth = parseInt(ccStyle.width.slice(0, -2));\n    const ccHeight = parseInt(ccStyle.height.slice(0, -2));\n\n    if(ccWidth > ccHeight) {\n      this.side = ccHeight;\n    } else {\n      this.side = ccWidth;\n    }\n\n    this.props.setSide(this.side);\n\n    this.updateCanvas();\n  }\n\n  // may be unnecessary\n  componentDidUpdate() {\n    this.updateCanvas();\n  }\n\n  updateCanvas() {\n    const ctx = this.refs.canvas.getContext('2d');\n    const panels = this.props.panels;\n\n    for(var i = 0; i < panels.length; i++) {\n      panels[i].draw(ctx, this.side, this.side);\n    }\n  }\n\n  canvasCoords(e) {\n    const canvas = e.target;\n    const borderWidth = parseInt(\n      (getComputedStyle(\n        canvas, null).getPropertyValue('border-left-width')).slice(0, -2)\n    );\n    const coords = {\n      v: e.pageX - (canvas.offsetLeft + borderWidth),\n      h: e.pageY - (canvas.offsetTop + borderWidth)\n    }\n\n    return coords;\n  }\n\n  canvasStart(e) {\n    e.preventDefault();\n    console.log('start')\n\n    // account for click or touch\n    var coords;\n    if(e.type === 'touchstart') {\n      coords = this.canvasCoords(e.changedTouches[0])\n    } else {\n      coords = this.canvasCoords(e);\n    }\n\n    // reusable function to search for line clicks on an axis\n    function iterTicks(axis, dir) {\n      if(axis.length < 1) {\n        return false\n      }\n      // check each tick in line to see if in handleColorChange\n      var tick;\n      for (tick of axis) {\n        if(coords[dir] > tick &&\n        coords[dir] < (tick + line.thickness)) {\n          // change priorClick attributes that can be handled in function\n          this.priorClick.dir= dir;\n          this.priorClick.coords.v = coords.v;\n          this.priorClick.coords.h = coords.h;\n          return true;\n        }\n      }\n      return false;\n    }\n    iterTicks = iterTicks.bind(this)\n\n    // find if any of the lines were clicked\n    var line\n    for (line of this.props.panels.slice(1)) {\n      // run iterTicks in each direction\n      if(iterTicks(line.grid.h, 'h') || iterTicks(line.grid.v, 'v')) {\n        // change remaining priorClick attributes\n        this.props.handleClick(line.index - this.props.currentPanel);\n        this.priorClick.idx = line.index;\n        return true\n      }\n    }\n    // default priorClick attributes\n    this.props.handleClick(0 - this.props.currentPanel);\n    this.priorClick.dir = null;\n    this.priorClick.coords.v = 0;\n    this.priorClick.coords.h = 0;\n    this.priorClick.idx = null;\n    return false;\n  }\n\n  canvasMove(e) {\n    e.preventDefault();\n    console.log('move')\n\n    if(this.priorClick.idx === null) {\n      return;\n    }\n\n    var coords;\n    if(e.type === 'touchmove'){\n      coords= this.canvasCoords(e.changedTouches[0]);\n    } else {\n      coords = this.canvasCoords(e)\n    }\n    const lines = this.props.panels;\n    const line = lines[this.priorClick.idx];\n\n    if(this.priorClick.dir === 'h') {\n      let offset = coords.h - this.priorClick.coords.h;\n      line.offset.y += offset;\n    } else if(this.priorClick.dir === 'v') {\n      let offset = coords.v - this.priorClick.coords.v;\n      line.offset.x += offset;\n    }\n\n    this.priorClick.coords.v = coords.v;\n    this.priorClick.coords.h = coords.h;\n\n    this.updateCanvas();\n  }\n\n  canvasEnd(e) {\n    e.preventDefault();\n    console.log('end')\n\n    this.updateCanvas();\n\n    this.priorClick.dir = null;\n    this.priorClick.coords.v = 0;\n    this.priorClick.coords.h = 0;\n    this.priorClick.idx = null;\n  }\n\n  render() {\n    return (\n      <div id='canvas-container'>\n        <canvas\n          ref='canvas'\n          id='canvas'\n          width={this.side}\n          height={this.side}\n          onTouchStart={(e) => this.canvasStart(e)}\n          onTouchMove={(e) => this.canvasMove(e)}\n          onTouchEnd={(e) => this.canvasEnd(e)}\n          onMouseDown={(e) => this.canvasStart(e)}\n          onMouseMove={(e) => this.canvasMove(e)}\n          onMouseUp={(e) => this.canvasEnd(e)}\n        />\n      </div>\n    )\n  }\n}\n","export function makeHeader(s) {\n  var header = s.charAt(0).toUpperCase();\n\n  for(let i = 1; i < s.length; i++) {\n    if(s.charAt(i) === s.charAt(i).toUpperCase()){\n      header += ' ';\n    }\n    header += s.charAt(i);\n  }\n\n  return header;\n}\n","import React from 'react';\nimport { makeHeader } from './helpers.js';\nimport './colorSlider.css';\n\nexport function ColorSlider(props) {\n\n  return (\n    <div className={props.row}>\n      <h5>\n        {makeHeader(props.aspect)}\n      </h5>\n      <input\n        type='range'\n        className='color-slider'\n        min={0}\n        max={props.max}\n        step={props.step}\n        value={props.color[props.aspect]}\n        data-aspect = {props.aspect}\n        style={props.style}\n        onChange={(e) => props.handleColorChange(e)}\n      />\n    </div>\n  )\n}\n","import React from 'react';\nimport { ColorSlider } from './colorSlider.js';\nimport './colorPanel.css';\n\nexport class ColorPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleColorChange = this.handleColorChange.bind(this);\n  }\n\n  handleColorChange(e) {\n    this.props.handleColorChange(e);\n  }\n\n  render() {\n\n    const color = this.props.colorSource.color;\n    const styler = new sliderStyle(color);\n    var bottomClass;\n    if(this.props.currentPanel < 1){\n      bottomClass = 'bottom2';\n    } else {\n      bottomClass = 'bottom3';\n    }\n\n    const hue = (\n      <ColorSlider\n        key='hue'\n        aspect='hue'\n        color={color}\n        max={360}\n        step={1}\n        row={'top'}\n        handleColorChange={this.handleColorChange}\n        style={styler.getStyle('h')}\n      />\n    )\n    const sat = (\n      <ColorSlider\n        key='sat'\n        aspect='sat'\n        color={color}\n        max={100}\n        step={1}\n        row={bottomClass}\n        handleColorChange={this.handleColorChange}\n        style={styler.getStyle('s')}\n      />);\n    const light = (\n      <ColorSlider\n        key='light'\n        aspect='light'\n        color={color}\n        max={100}\n        step={1}\n        row={bottomClass}\n        handleColorChange={this.handleColorChange}\n        style={styler.getStyle('l')}\n      />);\n    const opacity = (\n      <ColorSlider\n        key='opacity'\n        aspect='opacity'\n        color={color}\n        max={1}\n        step={.1}\n        row={bottomClass}\n        handleColorChange={this.handleColorChange}\n        style={styler.getStyle('a')}\n      />);\n    const topRow = hue\n    const bottomRow = [sat, light]\n    if(this.props.opacity){\n      bottomRow.push(opacity);\n    }\n\n    return (\n      <div id='color-panel'>\n        <div className=\"row\">{topRow}</div>\n        <div className=\"row\">{bottomRow}</div>\n      </div>\n    )\n  }\n}\n\nfunction sliderStyle(color) {\n  this.h = color.hue;\n  this.s = color.sat;\n  this.l = color.light;\n  this.a = color.opacity;\n\n  this.makeString = function(qual) {\n    var lin = \"linear-gradient(to right, \";\n    const stopPoints = ['0%, ','17%, ','33%, ','50%, ','67%, ','83%, ','100%'];\n    var left = 'hsla(';\n    var right;\n    var max;\n\n    if(qual === 'h') {\n      right = ', ' + this.s + '%, '+ this.l + '%, ' + this.a + ')';\n      max = 360;\n    } else if(qual === 's') {\n      left += this.h +', ';\n      right = '%, ' + this.l + '%, ' + this.a + ')';\n      max = 100;\n    } else if(qual === 'l') {\n      left += this.h +', ' + this.s + '%, ';\n      right = '%, ' + this.a + ')';\n      max = 100;\n    } else if(qual === 'a') {\n      left += this.h +', ' + this.s + '%, ' + this.l + '%, ';\n      right =')';\n      max = 1;\n    } else {\n      alert('invalid input');\n      return 1;\n    }\n\n    const inc = max / 6\n    var x = 0;\n    var point;\n    for(point of stopPoints) {\n      let hsla = left + x + right + ' ' + point;\n      lin += hsla;\n      x += inc;\n      if(x === max) {\n        x = 0;\n      }\n    }\n    lin += ')';\n\n    return lin;\n  }\n\n  this.getStyle = function(qual,width) {\n    return {\n      background: this.makeString(qual)\n    };\n  }\n}\n","import React from 'react';\nimport { makeHeader } from './helpers.js';\nimport './plusMinus.css';\n\nexport class PlusMinus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.input = React.createRef()\n  }\n\n\n  buttonChange(e) {\n    const input = this.input.current\n\n    var inc = parseInt(e.target.getAttribute('data-change'));\n    var oldVar = parseInt(input.value);\n    if(this.props.preventNegative) {\n      if(oldVar > 1 || inc > 0) {\n        input.value = inc + oldVar;\n      }\n    } else {\n      input.value = inc + oldVar;\n    }\n\n    const aspect = input.getAttribute('data-aspect');\n    this.props.handleLineChange(parseInt(input.value), aspect);\n  }\n\n  inputChange(e) {\n    const input = e.target;\n    const value = input.value;\n    const aspect = input.getAttribute('data-aspect');\n    const allowed_chars = ['0','1','2','3','4','5','6','7','8','9'];\n    if(!this.props.preventNegative) {\n      allowed_chars.push('-');\n    }\n    var endValue = ''\n\n    console.log('inputChange for ' + this.props.aspect);\n    console.log('value: ' + value);\n\n    if(value === '') {\n      this.props.handleLineChange(value, aspect);\n    }\n    // scrub for invalid chars\n    var i;\n    for(i = 0; i < value.length; i++) {\n      var char = value.charAt(i);\n      //console.log('char: ' + char);\n      //console.log(allowed_chars.indexOf(char))\n      if(allowed_chars.indexOf(char) >= 0) {\n        //console.log('allowed')\n        endValue += char;\n      }\n    }\n\n    console.log('endValue: ' + endValue);\n\n    if(isNaN(parseInt(endValue))) {\n      console.log('sent string');\n      this.props.handleLineChange(endValue, aspect);\n    } else {\n      console.log('sent num');\n      this.props.handleLineChange(parseInt(endValue), aspect);\n    }\n  }\n\n  readValue(value) {\n\n    console.log('readValue for ' + this.props.aspect);\n    console.log('value: ' + value);\n\n    // allow line to be cleared\n    if(value === '' || value === '-'){\n      return value;\n    // further scrub out NaNs\n    } else if(isNaN(value)) {\n      return 0;\n    // default\n    } else {\n      return value;\n    }\n\n  }\n\n  render() {\n\n    const header = makeHeader(this.props.aspect);\n    const third = this.props.width / 4;\n\n    return (\n      <div className='pm-container'>\n        <h5>\n          {header}\n        </h5>\n        <div className='pm-bundle'>\n          <button\n            onClick={(e) => this.buttonChange(e)}\n            data-change='-1'\n            className='pmButtons border-change'\n          >\n            -\n          </button>\n          <input\n            type='text'\n            onChange={(e) => this.inputChange(e)}\n            value={this.readValue(this.props.value)}\n            data-aspect={this.props.aspect}\n            ref={this.input}\n            className='pm-input'\n          />\n          <button\n            onClick={(e) => this.buttonChange(e)}\n            data-change='1'\n            className='pmButtons border-change'\n          >\n            +\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { makeHeader } from './helpers.js';\nimport './attrSelect.css'\n\nexport class AttrSelect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleLineChange = this.handleLineChange.bind(this);\n  }\n\n  handleLineChange(e) {\n    const target = e.target;\n    const value = target.value;\n    const aspect = target.getAttribute('data-aspect');\n\n\n    this.props.handleLineChange(value, aspect);\n  }\n\n  render() {\n\n    const header = makeHeader(this.props.aspect);\n\n\n    return (\n      <div id='selectContainer'>\n        <h5>\n          {header}\n        </h5>\n        <select\n          size={this.props.options.length}\n          value={this.props.value}\n          onChange={(e) => this.handleLineChange(e)}\n          data-aspect={this.props.aspect}\n          className='pm-select border-change'\n        >\n        {this.props.options.map(value => <option key={value[1]} value={value[1]}>{value[0]}</option>) }\n        </select>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ColorPanel } from './colorPanel.js';\nimport { PlusMinus } from './plusMinus.js';\nimport { AttrSelect } from './attrSelect.js';\nimport './linePanel.css';\n\nexport class BasicPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleColorChange = this.handleColorChange.bind(this);\n    this.handleLineChange = this.handleLineChange.bind(this);\n  }\n\n  handleColorChange(e) {\n    this.props.handleColorChange(e);\n  }\n\n  handleLineChange(v, a) {\n    this.props.handleLineChange(v, a);\n  }\n\n\n  render() {\n    const options = [['horizontal', 'h'],\n                     ['vertical','v'],\n                     ['both', 'b']];\n\n    return (\n      <div>\n        <ColorPanel\n          width={this.props.width}\n          colorSource={this.props.line}\n          currentPanel={this.props.currentPanel}\n          opacity={true}\n          handleColorChange={(e) => this.handleColorChange(e)}\n        />\n        <div id='attribute-panel'>\n          <div className='line-panel'>\n            <PlusMinus\n              aspect='regularity'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.regularity}\n              color={this.props.line.returnColor()}\n              preventNegative={true}\n            />\n            <PlusMinus\n              aspect='thickness'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.thickness}\n              color={this.props.line.returnColor()}\n              preventNegative={true}\n            />\n          </div>\n          <AttrSelect\n            aspect='orientation'\n            handleLineChange={(v, a) => this.handleLineChange(v, a)}\n            value={this.props.line.orientation}\n            options={options}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ColorPanel } from './colorPanel.js';\nimport { PlusMinus } from './plusMinus.js';\nimport { AttrSelect } from './attrSelect.js';\nimport './topPanel.css';\n\nexport class AdvancedPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleLineChange = this.handleLineChange.bind(this);\n  }\n\n  handleLineChange(v, a) {\n    this.props.handleLineChange(v, a);\n  }\n\n  render() {\n\n    const options = [['solid', 'solid'], ['//', 'rightSlash'],\n                    ['\\\\\\\\', 'leftSlash'],['=', 'horizontalStripes'],\n                    ['||', 'verticalStripes'],['checker', 'checker']];\n\n    return (\n      <div>\n        <div id='attribute-panel'>\n          <div className='line-panel'>\n            <PlusMinus\n              aspect='spacing'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.spacing}\n              color={this.props.line.returnColor()}\n              preventNegative={true}\n            />\n            <PlusMinus\n              aspect='lineWidth'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.lineWidth}\n              color={this.props.line.returnColor()}\n              preventNegative={true}\n            />\n            <PlusMinus\n              aspect='offset-x'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.offset.x}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n            <PlusMinus\n              aspect='offset-y'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.offset.y}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n            <PlusMinus\n              aspect='upper-boundary'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.boundary.u}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n            <PlusMinus\n              aspect='lower-boundary'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.boundary.d}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n            <PlusMinus\n              aspect='left-boundary'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.boundary.l}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n            <PlusMinus\n              aspect='right-boundary'\n              handleLineChange={(v, a) => this.handleLineChange(v, a)}\n              value={this.props.line.boundary.r}\n              color={this.props.line.returnColor()}\n              preventNegative={false}\n            />\n          </div>\n          <AttrSelect\n            aspect='pattern'\n            handleLineChange={(v, a) => this.handleLineChange(v, a)}\n            value={this.props.line.orientation}\n            options={options}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ColorPanel } from './colorPanel.js';\nimport { BasicPanel } from './basicPanel.js';\nimport { AdvancedPanel } from './advancedPanel.js';\nimport './topPanel.css';\n\nexport class TopPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleAddLine = this.handleAddLine.bind(this);\n    this.handleColorChange = this.handleColorChange.bind(this);\n    this.switchLine = this.switchLine.bind(this);\n  }\n\n  handleAddLine() {\n    console.log('pass topPanel')\n    const addHandler = this.props.handlers['addLine'];\n\n    addHandler();\n  }\n\n  handleColorChange(e) {\n    const colorChanger = this.props.handlers['colorChange'];\n\n    colorChanger(e);\n  }\n\n  handleLineChange(v, a) {\n    const lineChanger = this.props.handlers['lineChange'];\n\n    lineChanger(v, a);\n  }\n\n  switchLine(diff) {\n    const switchHandler = this.props.handlers['switchLine'];\n\n    switchHandler(diff);\n  }\n\n  render() {\n    var displayPanel;\n    var header\n\n    if(this.props.currentPanel === 0) {\n      header = 'Base';\n      displayPanel = (\n      <div id='top-panel'>\n        <h4\n          style={{color: this.props.panel.returnColor()}}\n        >\n          {header}\n        </h4>\n        <ColorPanel\n          width={this.props.width}\n          currentPanel={this.props.currentPanel}\n          colorSource={this.props.panel}\n          handleColorChange={(e) => this.handleColorChange(e)}\n        />\n      </div>\n      )\n    } else {\n      header = \"Line \" + this.props.currentPanel;\n      if(this.props.panel.boundTo) {\n        header += ' (bound to ' + this.props.panel.boundTo.index + ')'\n      }\n      if(this.props.panel.bindees.length > 0) {\n        header += ' binds '\n        const bindees  = this.props.panel.bindees.sort();\n        var i;\n        for (i = 0; i < bindees.length; i++) {\n          var b = bindees[i].index;\n          if(i === 0) {\n            header += b;\n          } else if(i < (bindees.length - 1)) {\n            header += ', ' + b;\n          } else {\n            header += ' & ' + b;\n          }\n        }\n      }\n\n      var attributes;\n\n      if (this.props.displayAdvanced) {\n        attributes = (\n          <AdvancedPanel\n            handleLineChange={(v, a) => this.handleLineChange(v, a)}\n            line={this.props.panel}\n            currentPanel={this.props.currentPanel}\n          />\n        )\n      } else {\n        attributes = (\n          <BasicPanel\n            handleColorChange={(e) => this.handleColorChange(e)}\n            handleLineChange={(v, a) => this.handleLineChange(v, a)}\n            line={this.props.panel}\n            currentPanel={this.props.currentPanel}\n          />\n        )\n      }\n\n      displayPanel = (\n      <div id='top-panel'>\n        <h4\n          style={{color: this.props.panel.returnColor()}}\n        >\n          {header}\n        </h4>\n        {attributes}\n      </div>\n      )\n    }\n\n    return displayPanel;\n  }\n}\n\n\n/*\n<ColorPanel\n  colorSource={this.props.panel}\n  currentPanel={this.props.currentPanel}\n  opacity={true}\n  handleColorChange={(e) => this.handleColorChange(e)}\n/>\n<AttributePanel\n  width={this.props.width}\n  handleColorChange={(e) => this.handleColorChange(e)}\n  handleLineChange={(v, a) => this.handleLineChange(v, a)}\n  line={this.props.panel}\n  currentPanel={this.props.currentPanel}\n  pattern={this.props.displayPattern}\n/>\n*/\n","// convert value from color element into string readable by fillStyle\n\n// Object constructors\nfunction returnColor(colorObj) {\n\n  return 'hsla(' + colorObj.hue + ', ' + colorObj.sat + '%, ' + colorObj.light + '%, '+ colorObj.opacity + ')';\n}\n\nexport function base() {\n  this.type = 'base';\n  this.index = '0'\n  this.color = {\n    hue: 180,\n    sat: 50,\n    light: 50,\n    opacity: 1.0\n  }\n\n  this.returnColor = function() {\n    var ret = returnColor(this.color);\n    return ret;\n  }\n\n  this.draw = function(ctx, width, height) {\n    if (this.color !== undefined) {\n      ctx.fillStyle = this.returnColor();\n      var background = new Path2D();\n      background.rect(0, 0, width, height);\n      ctx.fill(background);\n    }\n  };\n};\n\nexport function line(height, width, index) {\n  this.type='line';\n  this.index = index;\n  // attributes\n  this.color = {\n    hue: 0,\n    sat: 70,\n    light: 0,\n    opacity: 1.0\n  }\n  this.height = height;\n  this.width = width;\n  this.thickness = 10;\n  this.regularity = 1;\n  this.orientation = 'b'; // can be h for horizontal, v for vertical or b for both\n  this.pattern = 'solid';\n  this.spacing = 3; // space between iterations of the pattern\n  this.boundary = {\n    u: 0,\n    d: 0,\n    l: 0,\n    r: 0\n  }\n  this.offset = {\n    x: 0,\n    y: 0\n  };\n  this.grid = null;\n  this.lineWidth = 1;\n  this.boundTo = null;\n  this.bindees = [];\n\n  this.allowDraw = function() {\n    var reg;\n    var offX, offY, boundL, boundR, boundU, boundD\n    var checkNaNs = [this.offset.x, this.offset.y, this.boundary.l,\n      this.boundary.r, this.boundary.u, this.boundary.d, this.regularity,\n      this.thickness, this.spacing, this.lineWidth];\n    var i;\n    for(i = 0; i < checkNaNs; i++) {\n      if(isNaN(checkNaNs[i])) {\n        alert(checkNaNs[i] +' failed');\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n\n  // methods\n  this.createGrid = function() {\n\n    // will contain the latitude of horizontal lines and longitude of vertical\n    const xAxis = [];\n    const yAxis = [];\n\n\n\n    // determine where we start of end the marking\n    var xStart = 0 + this.boundary.l;\n    if(this.boundTo) {\n      xStart += this.boundTo.boundary.l;\n    }\n\n    var yStart = 0 + this.boundary.u;\n    if(this.boundTo) {\n      yStart += this.boundTo.boundary.u;\n    }\n\n    var xEnd = this.width + this.boundary.r;\n    if(this.boundTo) {\n      xEnd += this.boundTo.boundary.r;\n    }\n\n    var yEnd = this.height + this.boundary.d;\n    if(this.boundTo) {\n      yEnd += this.boundTo.boundary.d;\n    }\n\n    //console.log('X from ' + xStart + ' to ' + xEnd);\n    //console.log('Y from ' + yStart + ' to ' + yEnd);\n\n\n    // the space between ticks\n    const xGap = (xEnd - xStart) / (this.regularity + 1);\n    const yGap = (yEnd - yStart) / (this.regularity + 1);\n\n    //console.log('Gaps: X = ' + xGap +', Y = ' + yGap);\n\n    // get offset modifications from bind chain\n    var inheritOffset = this.boundTo;\n    var xOffsetChange = 0;\n    var yOffsetChange = 0;\n    var whileCount = 0;\n    while(inheritOffset){\n      whileCount += 1;\n      xOffsetChange += inheritOffset.offset.x;\n      yOffsetChange += inheritOffset.offset.y;\n      inheritOffset = inheritOffset.boundTo;\n    }\n\n    // mark out the ticks\n    for(let i = 0; i < this.regularity; i++) {\n\n        let xTick = ((xGap * (i + 1)) - (this.thickness / 2)) + this.offset.x + xStart;\n        let yTick = ((yGap * (i + 1)) - (this.thickness / 2)) + this.offset.y + yStart;\n\n        xTick += xOffsetChange;\n        yTick += yOffsetChange;\n\n        //console.log('xTick: ' + xTick + ',yTick: ' + yTick);\n\n        xAxis.push(xTick);\n        yAxis.push(yTick);\n    }\n\n    this.grid = {\n      h: yAxis,\n      v: xAxis\n    }\n    //console.log(this.grid);\n  }\n\n  this.returnColor = function() {\n    return returnColor(this.color)\n  }\n\n  this.drawSolid = function(lineStart, side, ctx, dir) {\n\n    if(dir === 'h') {\n      ctx.fillRect(0, lineStart, side, this.thickness);\n    } else if (dir === 'v') {\n      ctx.fillRect(lineStart, 0, this.thickness, side);\n    } else {\n      alert('critical draw error: improper dir');\n    }\n  }\n\n  this.drawRightSlash = function(lineStart, side, ctx, dir) {\n\n    const iter = side / this.spacing;\n\n    for(let i = -5; i < iter + 5; i++) {\n      let startX;\n      let startY;\n      let endX;\n      let endY;\n\n      if(dir === 'h') {\n        startX = this.spacing * i;\n        startY = lineStart + this.thickness;\n        endX = startX + this.spacing;\n        endY = startY - this.thickness;\n\n      } else if(dir === 'v') {\n        startX = lineStart;\n        startY = this.spacing * (i + 1);\n        endX = startX + this.thickness;\n        endY = startY - this.spacing;\n\n      } else {\n        alert('cirtical draw error: improper ')\n      }\n\n      ctx.lineWidth = this.lineWidth;\n      ctx.strokeStyle = this.returnColor();\n\n      ctx.beginPath();\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(endX, endY);\n      ctx.stroke();\n      ctx.closePath();\n    }\n  }\n\n  this.drawLeftSlash = function(lineStart, side, ctx, dir) {\n\n    const iter = side / this.spacing;\n\n    for(let i = -5; i < iter + 5; i++) {\n      let startX;\n      let startY;\n      let endX;\n      let endY;\n\n      if(dir === 'h') {\n        startX = this.spacing * i;\n        startY = lineStart;\n        endX = startX + this.spacing;\n        endY = startY + this.thickness;\n\n      } else if(dir === 'v') {\n        startX = lineStart;\n        startY = this.spacing * i;\n        endX = startX + this.thickness;\n        endY = startY + this.spacing;\n\n      } else {\n        alert('cirtical draw error: improper dir');\n      }\n\n      ctx.lineWidth = this.lineWidth;\n      ctx.strokeStyle = this.returnColor();\n\n      ctx.beginPath();\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(endX, endY);\n      ctx.stroke();\n      ctx.closePath();\n    }\n  }\n\n  this.drawHorizontalStripes = function(lineStart, side, ctx, dir) {\n    var iter;\n    var setBack;\n\n    if (dir === 'h') {\n       iter = Math.floor(this.thickness / this.spacing);\n       setBack = 0;\n    } else if (dir === 'v') {\n        iter = Math.floor(side / this.spacing) + 5\n        setBack = -5;\n    } else {\n      alert('critical draw error: improper dir');\n    }\n\n    for(let i = setBack; i < iter; i++) {\n      let startX;\n      let startY;\n      let endX;\n      let endY;\n\n      if(dir === 'h') {\n        startX = 0;\n        startY = lineStart  + (i * this.spacing);\n        endX = side;\n        endY = startY;\n\n      } else if(dir === 'v') {\n        startX = lineStart;\n        startY = this.spacing * i;\n        endX = startX + this.thickness;\n        endY = startY;\n\n      } else {\n        alert('cirtical draw error: improper dir');\n      }\n\n      ctx.lineWidth = this.lineWidth;\n      ctx.strokeStyle = this.returnColor();\n\n      ctx.beginPath();\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(endX, endY);\n      ctx.stroke();\n      ctx.closePath();\n\n    }\n  }\n\n  this.drawVerticalStripes = function(lineStart, side, ctx, dir) {\n    var iter;\n    var setBack;\n\n    if (dir === 'v') {\n       iter = Math.floor(this.thickness / this.spacing);\n       setBack = 0;\n    } else if (dir === 'h') {\n        iter = Math.floor(side / this.spacing) + 5\n        setBack = -5\n    } else {\n      alert('cirtical draw error: improper dir');\n    }\n\n    for(let i = setBack; i < iter; i++) {\n      let startX;\n      let startY;\n      let endX;\n      let endY;\n\n      if(dir === 'v') {\n        startX = lineStart  + (i * this.spacing);\n        startY = 0;\n        endX = startX;\n        endY = side;\n\n      } else if(dir === 'h') {\n        startX = this.spacing * i;\n        startY = lineStart;\n        endX = startX;\n        endY = startY + this.thickness;\n\n      } else {\n        alert('cirtical draw error: improper dir');\n      }\n\n      ctx.lineWidth = this.lineWidth;\n      ctx.strokeStyle = this.returnColor();\n\n      ctx.beginPath();\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(endX, endY);\n      ctx.stroke();\n      ctx.closePath();\n\n    }\n  }\n\n  this.drawChecker = function(lineStart, side, ctx, dir) {\n\n    var topLeft = true;\n    var breadth = Math.floor(side / this.spacing);\n    var depth = Math.floor(this.thickness / this.spacing);\n\n    console.log(breadth, depth)\n\n    for(let i = 0; i < breadth; i++) {\n      if(topLeft) {\n        for(let j = 0; j < depth; j += 2) {\n          if(dir === 'h') {\n            let x = (i * this.spacing);\n            let y = (j * this.spacing) + lineStart;\n            ctx.fillRect(x, y, this.spacing, this.spacing)\n          } else if(dir === 'v') {\n            let x = (j * this.spacing) + lineStart;\n            let y = (i * this.spacing);\n            ctx.fillRect(x,y,this.spacing, this.spacing)\n          }\n        }\n      } else {\n        for(let j = 1; j < depth; j += 2) {\n          if(dir === 'h') {\n            let x = (i * this.spacing);\n            let y = (j * this.spacing) + lineStart;\n            ctx.fillRect(x, y, this.spacing, this.spacing)\n          } else if(dir === 'v') {\n            let x = (j * this.spacing) + lineStart;\n            let y = (i * this.spacing);\n            ctx.fillRect(x,y,this.spacing, this.spacing)\n          }\n        }\n      }\n      topLeft = !topLeft;\n    }\n  }\n\n\n  this.drawSolid = this.drawSolid.bind(this);\n  this.drawRightSlash = this.drawRightSlash.bind(this);\n  this.drawLeftSlash = this.drawLeftSlash.bind(this);\n  this.drawHorizontalStripes = this.drawHorizontalStripes.bind(this);\n  this.drawVerticalStripes = this.drawVerticalStripes.bind(this);\n  this.drawChecker = this.drawChecker.bind(this);\n\n\n  this.drawPatterns = {\n    solid: this.drawSolid,\n    rightSlash: this.drawRightSlash,\n    leftSlash: this.drawLeftSlash,\n    horizontalStripes:  this.drawHorizontalStripes,\n    verticalStripes: this.drawVerticalStripes,\n    checker: this.drawChecker\n  }\n\n  this.draw = function(ctx, width, height) {\n\n    if (this.allowDraw()){\n      this.createGrid();\n\n      ctx.save();\n      ctx.fillStyle = this.returnColor();\n\n      this.drawLines = function(dir, side, ctx) {\n        //console.log('side: ' + side);\n        //console.log('divisor: ' + (this.regularity + 1));\n\n\n        const axis = this.grid[dir];\n\n        for(let i = 0; i < axis.length; i++) {\n\n            this.drawPatterns[this.pattern](axis[i], side, ctx, dir);\n        }\n      }\n\n      this.drawLines = this.drawLines.bind(this)\n\n      if(this.orientation === 'h' || this.orientation === 'b') {\n        this.drawLines('h', height, ctx);\n      }\n\n      if(this.orientation === 'v' || this.orientation === 'b') {\n        this.drawLines('v', width, ctx);\n      }\n\n      ctx.restore();\n    } else {\n      alert('draw averted');\n      return 0;\n    }\n\n\n  };\n  //this.drawBoundaries = function(ctx, width)\n  this.draw = this.draw.bind(this);\n\n}\n","import React from 'react';\nimport './buttonPanel.css';\n\nexport function ButtonPanel(props) {\n\n  function switchPanel(e) {\n    let diff = parseInt(e.target.value)\n\n    props.handlers['switchLine'](diff);\n  }\n\n\n  function underConstruction() {\n    alert('this feature is under production');\n  }\n\n  var toggleText;\n\n  if(props.displayAdvance) {\n    toggleText = \"Basic\";\n  } else {\n    toggleText = \"Advanced\";\n  }\n\n  return (\n    <div id='button-panel'>\n      <button\n        onClick={switchPanel}\n        value = {-1}\n        id='back'\n      >\n        {'<<'}\n      </button>\n      <button\n        onClick={props.handlers['addLine']}\n        id='add'\n      >\n        Add\n      </button>\n      <button\n        onClick={props.handlers['removeLine']}\n        id='remove'\n      >\n        Remove\n      </button>\n      <button\n        onClick={props.handlers['copyLine']}\n        id='copy'\n      >\n        Copy\n      </button>\n      <button\n        onClick={props.handlers['advancedToggle']}\n      >\n        {toggleText}\n      </button>\n      <button\n        onClick={props.handlers['downloadToggle']}\n        id='download'\n      >\n        Download\n      </button>\n      <button\n        onClick={props.handlers['bindToggle']}\n        id='bind'\n      >\n        Bind\n      </button>\n      <button\n        onClick={switchPanel}\n        value = {1}\n        id='forward'\n      >\n        {'>>'}\n      </button>\n    </div>\n  )\n}\n","import React from 'react';\nimport './topBar.css';\n\nexport function TopBar(props) {\n  var display;\n\n  if(props.nav) {\n    display = (\n      <div id='nav-bar' class='col-12'>\n        <button\n          id='nav-bar-close'\n          class='close-button'\n          onClick={props.flip}\n        >\n          X\n        </button>\n        <div id='inner-nav'>\n          <a href='https://vkwebsite.herokuapp.com/'>Homepage</a>\n          <a href='https://vkplaid.herokuapp.com/' id='active'>Plaid Maker</a>\n          <a href='https://vkwebsite.herokuapp.com/ep_search'>Episode Picker</a>\n          <a class='hidden' id='placeholder'></a>\n        </div>\n      </div>\n    )\n  } else {\n    display = (\n      <div id='top-bar'>\n        <button\n          id='nav-bar-open'\n          onClick={props.flip}\n        >Nav Bar</button>\n        <a\n          href='https://github.com/kuertzva/Plaid-Generator'\n          id='github-link'\n        >Github</a>\n      </div>\n    )\n  }\n\n  return display;\n}\n\n// export default TopBar;\n","import React from 'react';\nimport './download.css';\n\nexport class Download extends React.Component {\n  constructor(props) {\n    super(props)\n    this.togglePreview = this.togglePreview.bind(this);\n    this.downloadImage = this.downloadImage.bind(this);\n    this.changeFormat = this.changeFormat.bind(this);\n    this.changeFilename = this.changeFilename.bind(this);\n    this.state = {\n      preview: false,\n      format: 'png',\n      filename: 'plaid'\n    };\n  }\n\n  componentDidMount() {\n    const png = document.getElementById('png');\n    png.checked = true;\n  }\n\n\n  togglePreview() {\n    this.setState((state) => ({\n      preview: !(state.preview)\n    }));\n  }\n\n  downloadImage() {\n    //alert('download triggered');\n    const canvas = document.getElementById('canvas');\n    const urlInput = 'image/' + this.state.format\n    const image = canvas.toDataURL(urlInput);\n\n    //alert(urlInput);\n\n    const link = document.createElement('a');\n    const filename = this.state.filename + '.'+ this.state.format;\n    document.body.appendChild(link);\n    link.download = filename;\n    //alert(filename);\n    link.href = image;\n    link.click();\n    document.body.removeChild(link);\n\n  }\n\n  changeFormat(e) {\n    const target = e.target;\n    const value = target.value;\n\n    this.setState({\n      format: value\n    });\n  }\n\n  changeFilename(e) {\n    const forbidden = ['<','>',':','\"','/','\\\\','|','?','*'];\n    const newString = e.target.value;\n    const lastChar = newString[newString.length - 1];\n\n    if(forbidden.indexOf(lastChar) >= 0) {\n      alert('this is not an allowed character!')\n    } else {\n      this.setState((state) => ({\n        filename: newString\n      }));\n    }\n\n  }\n\n\n\n  render() {\n\n    const formats = [['png', true], ['jpeg', false], ['bmp', false], ['webp', false]]\n\n    const radioButtons = formats.map((format) =>\n\n      <label> {format[0].charAt(0).toUpperCase() + format[0].substring(1)}\n          <input type='radio' name='radioButtons' value={format[0]}\n          id={format[0]} onChange={(e) => this.changeFormat(e)}/>\n      </label>\n\n    )\n\n    var preview;\n\n    if(this.state.preview) {\n\n      const canvas = document.getElementById('canvas');\n      const bkgd = canvas.toDataURL('image/png');\n\n      preview = (\n        <div\n          id='preview'\n          style= {{\n            backgroundImage: 'url(' + bkgd + ')'\n          }}\n        >\n          <button\n            id='close-preview'\n            class='close-button'\n            onClick={this.togglePreview}\n          > X </button>\n        </div>\n      )\n\n    } else {\n      preview = false;\n    }\n\n\n  // checked={format[1]}\n    return (\n      <div class='overlay col-12 narrow-row'>\n        {preview}\n        <button\n          id='download-close'\n          class='close-button'\n          onClick={this.props.flip}\n        >\n          X\n        </button>\n        <div id='inner-download' class='feature-box pop-up no-shadow'>\n          <h1> Download </h1>\n          <label>File Name:\n            <input\n              id='file-name'\n              type='text'\n              value={this.state.filename}\n              onChange={(e) => this.changeFilename(e)}\n            />\n          </label>\n          <div class='radio-options'>\n            {radioButtons}\n          </div>\n          <div className='button-box'>\n            <button\n              className='option-buttons'\n              id='preview-button'\n              onClick={this.togglePreview}\n            >\n              Preview\n            </button>\n            <button\n              className='option-buttons'\n              id='download-button'\n              onClick={this.downloadImage}\n            >\n              Download\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n//export default Download;\n","import React from 'react';\nimport './bind.css';\n\nexport function Bind(props) {\n\n  function handleBind() {\n    const radios = document.getElementsByName('lineButtons');\n    var i;\n    var found = false;\n    for (i = 0; i < radios.length; i++) {\n      if(radios[i].checked) {\n        var value = radios[i].value;\n        props.bind(value);\n        found = true;\n        props.flip();\n        break;\n      }\n    } if(!found) {\n      alert('none selected');\n    }\n  }\n\n  // create list of lines to bind to\n  var otherLines = [];\n  var count = 1;\n  const current = props.panels[props.currentPanel];\n  while(count < props.panels.length) {\n    if (count !== props.currentPanel) {\n      if(!(current.bindees.includes(props.panels[count]))) {\n        otherLines.push(count);\n      }\n    }\n    count++;\n  }\n\n\n  console.log(otherLines);\n\n  const lineButtons = otherLines.map((line) =>\n\n    <label> {line}\n        <input type='radio' name='lineButtons' value={line}\n        id={line} key={line}/>\n    </label>\n\n  )\n\n  var contents;\n  const bound = props.panels[props.currentPanel].boundTo;\n  if(!bound){\n    contents = (\n      <div className='feature-box pop-up no-shadow' id='bind-panel'>\n        <h1>Bind</h1>\n        <h3>Which line would you like to bind this like too?</h3>\n        <div className='radio-options'>\n          {lineButtons}\n        </div>\n        <div className='button-box'>\n          <button\n            className='option-buttons'\n            onClick={handleBind}\n          >\n            Bind\n          </button>\n        </div>\n      </div>\n    )\n  } else {\n    contents = (\n      <div className='feature-box pop-up no-shadow' id='bind-panel'>\n        <h1> Unbind this line? </h1>\n        <div className='button-box'>\n          <button\n            className='option-buttons'\n            onClick={props.unbind}\n          >\n            Unbind\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className='overlay col-12 narrow-row'>\n      <button\n        id='bind-close'\n        className='close-button'\n        onClick={props.flip}\n      >\n        X\n      </button>\n      {contents}\n    </div>\n  )\n}\n","import React from 'react';\nimport './intro.css';\n\nfunction Intro(props) {\n  return (\n    <div id='outer-intro' className='overlay col-24 narrow-row'>\n      <div id='inner-intro' className='pop-up no-shadow'>\n        <div id='intro-text'>\n          <h1> Welcome! </h1>\n          <h2> This is my Plaid Maker</h2>\n          <p>\n            Please check it out and see what you can make. This is still a work\n            in progress. Features may still be a little buggy and more features are\n            on the way.\n          </p>\n          <p>\n            You can navigate away from this page using the link at the top left.\n          </p>\n          <h2> How this works</h2>\n          <p>\n            This project consists of a base object and a series of line objects\n            which are drawn on a canvas html element. The base is the background\n            you draw the lines against. We'll start there.\n          </p>\n          <h3>Base</h3>\n          <p>\n            For now, this is pretty simple. All the base has is a color, which\n            is defined by its hue, saturation and lightness. Now lets get to lines.\n          </p>\n          <h3>Lines</h3>\n          <p>\n            Lines also have a color, but this also has an opacity that give the\n            line the possibility of being transparent. Lines can go up, down or\n            both and I refer to this as the lines orientation. A line will repeat\n            a number of times on each relevant axis and this is called the lines\n            regularity. The lines can be moved along there axis using the offset.\n            Clicking a draging a line can be used to chang eoffset, though I'm\n            still working on making this consistent.\n          </p>\n          <p>\n            Lines can be changed to display as a number of patterns that can be\n            modified when relevant. This is accessed by clicking the pattern\n            button. You can switch lines with the buttons on the edges of the\n            patterns or by clicking them in the canvas (again, not completely\n            smooth.\n          </p>\n          <p>\n            Lines can be added, removed or copied. The bind button, when\n            implemented, will make 2 lines regularity and offset dependent on one\n            another to create more intricate patterns. The download button will\n            allow you to download your pattern as an image.\n          </p>\n          <p>\n            Have fun!\n          </p>\n        </div>\n        <div id='intro-button-container'>\n          <button onClick={props.handleClick}>\n            Plaid Time!\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Intro;\n","import React from 'react';\nimport { Canvas } from './canvas.js';\nimport { TopPanel } from './topPanel.js';\nimport { line, base } from './objects.js';\nimport { ButtonPanel } from './buttonPanel.js';\nimport { TopBar } from './topBar.js';\nimport { Download } from './download.js';\nimport { Bind } from './bind.js';\nimport Intro from './intro.js';\nimport './App.css';\n\n\nconst root = document.getElementById('root');\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Multi-component function binding\n    this.switchLine = this.switchLine.bind(this);\n    this.handleLineChange = this.handleLineChange.bind(this);\n    this.downloadToggle = this.downloadToggle.bind(this);\n    this.bindToggle = this.bindToggle.bind(this);\n    // Conditional pop-up function binding\n    this.introToggle = this.introToggle.bind(this);\n    this.handleBind = this.handleBind.bind(this);\n    this.handleUnbind = this.handleUnbind.bind(this);\n    // TopBar function binding\n    this.navToggle = this.navToggle.bind(this);\n    // Canvas function binding\n    this.setSide = this.setSide.bind(this);\n    // ButtonPanel functiong binding\n    this.handleAddLine = this.handleAddLine.bind(this);\n    this.handleRemoveLine = this.handleRemoveLine.bind(this);\n    this.handleCopyLine = this.handleCopyLine.bind(this);\n    this.advancedToggle = this.advancedToggle.bind(this);\n    // TopPanel function binding\n    this.handleColorChange = this.handleColorChange.bind(this);\n    // Called in this component\n    this.unbind = this.unbind.bind(this);\n    this.bind = this.bind.bind(this);\n\n    //const for use throughout\n    const rootStyle = getComputedStyle(root);\n\n    this.state = {\n      intro: true,\n      nav: false,\n      download: false,\n      bind: false,\n      displayAdvanced: false,\n      panels: [new base()],\n      currentPanel: 0,\n      topHandlers: {\n        'colorChange': this.handleColorChange,\n        'lineChange' : this.handleLineChange,\n      },\n      buttonHandlers: {\n        'switchLine' : this.switchLine,\n        'addLine' : this.handleAddLine,\n        'removeLine' : this.handleRemoveLine,\n        'copyLine' : this.handleCopyLine,\n        'advancedToggle' : this.advancedToggle,\n        'downloadToggle': this.downloadToggle,\n        'bindToggle' : this.bindToggle\n      },\n      width: parseInt(rootStyle.width),\n      height: parseInt(rootStyle.height),\n      side: null\n    };\n  }\n\n  updateStyles() {\n    const bkgd = document.getElementById('canvas').toDataURL('image/png');\n\n    document.body.style.backgroundColor = this.state.panels[0].returnColor();\n    document.body.style.backgroundImage = 'url(' + bkgd + ')';\n\n    const borderChanges = document.querySelectorAll('.border-change');\n\n    let lineColor = this.state.panels[this.state.currentPanel].returnColor();\n\n    let border;\n    for(border of borderChanges) {\n      border.style.borderColor = lineColor;\n    }\n  }\n\n  componentDidMount() {\n    const canvasStyle = getComputedStyle(document.getElementById('canvas'));\n    this.setState({\n      canvasWidth: parseInt(canvasStyle.width),\n      canvasHeight: parseInt(canvasStyle.height)\n    })\n\n    // styling changes\n    this.updateStyles();\n\n  }\n\n  componentDidUpdate() {\n    this.updateStyles();\n  }\n\n  // FUNCTIONS PASSED TO MULTIPLE COMPONENTS\n\n  switchLine(diff) {\n    let currentPanel = this.state.currentPanel + diff;\n\n    if(0 <= currentPanel && currentPanel < this.state.panels.length){\n      this.setState({\n        currentPanel: currentPanel\n      });\n    }\n  }\n\n  handleLineChange(v, a) {\n\n    // set consts\n    const value = v\n    const aspect = a\n    const lines = this.state.panels;\n    const line = lines[this.state.currentPanel];\n\n    // check for unique aspects\n    if (aspect.slice(0, 6) === 'offset'){\n      line[aspect.slice(0,6)][aspect.slice(7)] = value\n    } else if (aspect.slice(-8) === 'boundary'){\n      if(aspect.charAt(0) === 'l') {\n        if(aspect.charAt(1) === 'e') {\n          line[aspect.slice(-8)][aspect.charAt(0)] = value;\n        } else {\n          line[aspect.slice(-8)].d = value;\n        }\n      } else {\n        line[aspect.slice(-8)][aspect.charAt(0)] = value;\n      }\n    // base case for nonunique aspects\n    }else {\n      line[aspect] = value;\n    }\n\n    // setState\n    this.setState({\n      panels: lines\n    });\n  }\n\n  downloadToggle() {\n    this.setState((state) => ({\n      download: !(state.download)\n    }));\n  }\n\n  bindToggle() {\n\n    if(this.state.currentPanel > 0){\n      if(this.state.panels.length > 2) {\n        this.setState((state) => ({\n          bind: !(state.bind)\n        }));\n      } else {\n        alert(\"Nothing to bind to!\")\n      }\n    } else {\n      alert(\"You can't bind the background!\");\n    }\n  }\n\n  // FUNCTIONS PASSED TO CONDITIONAL POP UP (OVERLAY)\n\n  introToggle() {\n    this.setState((state) => ({\n      intro: !(state.intro)\n    }));\n  }\n\n  handleBind(index) {\n    const bindor = this.state.panels[index];\n    const bindee = this.state.panels[this.state.currentPanel];\n\n    this.bind(bindee, bindor);\n  }\n\n  handleUnbind() {\n    const bindee = this.state.panels[this.state.currentPanel];\n\n    this.unbind(bindee);\n\n    this.bindToggle();\n\n  }\n\n\n  // FUNCTIONS PASSED TO TopBar\n  navToggle() {\n    this.setState((state) => ({\n      nav: !(state.nav)\n    }));\n  }\n\n  // FUNCTIONS PASS TO CANVAS\n\n  setSide(side) {\n    this.setState({\n      side: side\n    })\n  }\n\n  // FUNCTIONS PASSED TO BUTTON PANEL\n\n  handleAddLine() {\n    const newPanels = this.state.panels;\n\n    newPanels.push(new line(this.state.side, this.state.side, this.state.panels.length));\n\n    this.setState({\n      panels: newPanels,\n      currentPanel: newPanels.length - 1\n    });\n  }\n\n  handleRemoveLine() {\n\n    // prevent removing base\n    if(this.state.currentPanel > 0) {\n      const current = this.state.panels[this.state.currentPanel];\n      const newPanels = this.state.panels;\n      // check for binding\n      if(current.bindees.length > 0 || current.boundTo) {\n        //alert('Please unbind before removing')\n\n        // unbind all bound to line to be removed\n        if(current.bindees.length > 0) {\n          var bindees = current.bindees.slice(0);\n          for(var i = 0; i < bindees.length; i++) {\n            this.unbind(bindees[i]);\n          }\n        }\n        // unbind line to be removed\n        if(current.boundTo) {\n          this.unbind(current);\n        }\n      }\n\n      // remove the line\n      newPanels.splice(this.state.currentPanel, 1);\n\n      // fix the indexes\n      var i;\n      for (i = 1; i < newPanels.length; i++) {\n        newPanels[i].index = i;\n      }\n\n      var newCurrent = this.state.currentPanel - 1;\n      this.setState({\n          panels: newPanels,\n          currentPanel: newCurrent\n        });\n    } else {\n      alert('Cannot delete the background');\n    }\n  }\n\n  handleCopyLine() {\n    //check we aren't copying the base\n    if(this.state.currentPanel > 0) {\n      // make consts\n      const newPanels = this.state.panels;\n      const currentLine = this.state.panels[this.state.currentPanel];\n      const copyLine = new line(this.state.side, this.state.side,this.state.panels.length);\n      // attributes of lines\n      const copyStrings = [['color','hue','sat','light','opacity'], 'height', 'width', 'thickness',\n    'regularity', 'orientation', 'pattern', 'spacing', ['offset', 'x', 'y'], 'grid',\n    'lineWidth'];\n\n      // copy all attributes\n      var attr;\n      for(attr of copyStrings) {\n        if(Array.isArray(attr)){\n          var i;\n          for(i = 1; i < attr.length; i++) {\n            copyLine[attr[0]][attr[i]] = currentLine[attr[0]][attr[i]];\n          }\n        } else {\n          copyLine[attr] = currentLine[attr];\n        }\n      }\n\n      // bind if necessary\n      if(currentLine.boundTo) {\n        this.bind(copyLine, currentLine.boundTo);\n      }\n\n      // add to state variables\n      newPanels.push(copyLine);\n      this.setState({\n        currentPanel: newPanels.length - 1,\n        panels: newPanels,\n      });\n    }\n  }\n\n  handleColorChange(e) {\n\n    // set vars and consts\n    const target = e.target;\n    const aspect = target.getAttribute('data-aspect');\n    const input = target.value;\n    var key = 'panels';\n    var value = this.state.panels;\n    var color = value[this.state.currentPanel].color;\n    color[aspect] = input;\n\n    this.setState({\n      [key]: value\n    });\n  }\n\n  advancedToggle() {\n    this.setState((state) => ({\n      displayAdvanced: !(state.displayAdvanced)\n    }));\n  }\n\n  downloadToggle() {\n    this.setState((state) => ({\n      download: !(state.download)\n    }));\n  }\n\n  // UNPASSED/ CALLED WITHIN THIS COMPONENT\n  bind(bindee, bindor) {\n    bindee.boundTo = bindor;\n    bindor.bindees.push(bindee);\n\n    // This is the make the line not move when bound\n    bindee.offset.x -= bindor.offset.x;\n    bindee.offset.y -= bindor.offset.y;\n    bindee.boundary.u -= bindor.boundary.u;\n    bindee.boundary.d -= bindor.boundary.d;\n    bindee.boundary.l -= bindor.boundary.l;\n    bindee.boundary.r -= bindor.boundary.r;\n  }\n\n\n\n  unbind(bindee) {\n    const bindor = bindee.boundTo;\n\n    bindee.boundTo = null;\n\n    // remove bindee from bindor's bindees\n    var bindeeIndex = bindor.bindees.indexOf(bindee);\n    if(bindeeIndex !== -1) {\n      bindor.bindees.splice(bindeeIndex, 1);\n    }\n\n    // This is the make the line not move when bound\n    bindee.offset.x += bindor.offset.x;\n    bindee.offset.y += bindor.offset.y;\n    bindee.boundary.u += bindor.boundary.u;\n    bindee.boundary.d += bindor.boundary.d;\n    bindee.boundary.l += bindor.boundary.l;\n    bindee.boundary.r += bindor.boundary.r;\n  }\n\n  render() {\n    // check for and display necessary popups\n    var overlay;\n    if(this.state.intro){\n      overlay = <Intro handleClick={() => this.introToggle()}/>\n    } else if(this.state.download) {\n      overlay = (\n        <Download\n          flip={this.downloadToggle}\n        />\n      )\n    } else if(this.state.bind) {\n      overlay = (\n        <Bind\n          flip={this.bindToggle}\n          bind={(i) => this.handleBind(i)}\n          unbind={() => this.handleUnbind()}\n          panels={this.state.panels}\n          currentPanel={this.state.currentPanel}\n        />\n      )\n    } else {\n      overlay = false;\n    }\n\n    return (\n      <div id='frame' className='col-12 thick-row'>\n        {overlay}\n        <TopBar\n          nav={this.state.nav}\n          flip={this.navToggle}\n        />\n        <div id='app'>\n          <Canvas\n            panels={this.state.panels}\n            currentPanel={this.state.currentPanel}\n            handleClick={this.switchLine}\n            setSide={(s) => this.setSide(s)}\n          />\n          <ButtonPanel\n            switchPanel={(d) => this.switchLine(d)}\n            handlers={this.state.buttonHandlers}\n            display = {this.state.displayAdvanced}\n            width={this.props.width}\n          />\n          <TopPanel\n            width={this.state.width}\n            height={this.state.height}\n            panel={this.state.panels[this.state.currentPanel]}\n            currentPanel={this.state.currentPanel}\n            handlers={this.state.topHandlers}\n            displayAdvanced={this.state.displayAdvanced}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App;\n\n/*\n\n*/\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}